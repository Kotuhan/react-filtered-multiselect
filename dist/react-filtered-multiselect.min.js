/*!
 * react-filtered-multiselect 0.4.0 - https://github.com/insin/react-filtered-multiselect
 * MIT Licensed
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.FilteredMultiSelect=t(require("react")):e.FilteredMultiSelect=t(e.React)}(this,function(e){return function(e){function t(i){if(s[i])return s[i].exports;var l=s[i]={exports:{},id:i,loaded:!1};return e[i].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){for(var s={},i=0,l=e.length;l>i;i++)t?s[e[i][t]]=!0:s[e[i]]=!0;return s}function r(e,t,s){for(var i=[],r=0,o=l(s),n=0,a=e.length,p=s.length;a>n&&p>r;n++)o[e[n][t]]&&(i.push(e[n]),r++);return i}t.__esModule=!0;var o=s(1),n=i(o),a={button:"FilteredMultiSelect__button",buttonActive:"FilteredMultiSelect__button--active",filter:"FilteredMultiSelect__filter",select:"FilteredMultiSelect__select"};t.default=n.default.createClass({displayName:"FilteredMultiSelect",propTypes:{onChange:o.PropTypes.func.isRequired,options:o.PropTypes.array.isRequired,buttonText:o.PropTypes.string,className:o.PropTypes.string,classNames:o.PropTypes.object,defaultFilter:o.PropTypes.string,disabled:o.PropTypes.bool,placeholder:o.PropTypes.string,selectedOptions:o.PropTypes.array,size:o.PropTypes.number,textProp:o.PropTypes.string,valueProp:o.PropTypes.string},getDefaultProps:function(){return{buttonText:"Select",className:"FilteredMultiSelect",classNames:{},defaultFilter:"",disabled:!1,placeholder:"type to filter",size:6,selectedOptions:[],textProp:"text",valueProp:"value"}},getInitialState:function(){var e=this.props,t=e.defaultFilter,s=e.selectedOptions;return{filter:t,filteredOptions:this._filterOptions(t,s),selectedValues:[]}},componentWillReceiveProps:function(e){(e.options!==this.props.options||e.selectedOptions!==this.props.selectedOptions||e.options.length!==this.props.options.length||e.selectedOptions.length!==this.props.selectedOptions.length)&&this.setState({filteredOptions:this._filterOptions(this.state.filter,e.selectedOptions,e.options)},this._updateSelectedValues)},_getClassName:function(e){if(1===arguments.length)return this.props.classNames[e]||a[e];for(var t=0,s=arguments.length;s>t;t++)if(arguments[t]in this.props.classNames)return this.props.classNames[arguments[t]];return a[e]},_filterOptions:function(e,t,s){"undefined"==typeof e&&(e=this.state.filter),"undefined"==typeof t&&(t=this.props.selectedOptions),"undefined"==typeof s&&(s=this.props.options),e=e.toUpperCase();for(var i=this.props,r=i.textProp,o=i.valueProp,n=l(t,o),a=[],p=0,u=s.length;u>p;p++)n[s[p][o]]||e&&-1===s[p][r].toUpperCase().indexOf(e)||a.push(s[p]);return a},_onFilterChange:function(e){var t=e.target.value;this.setState({filter:t,filteredOptions:this._filterOptions(t)},this._updateSelectedValues)},_onFilterKeyPress:function(e){var t=this;if("Enter"===e.key&&(e.preventDefault(),1===this.state.filteredOptions.length)){var s=this.state.filteredOptions[0],i=this.props.selectedOptions.concat([s]);this.setState({filter:"",selectedValues:[]},function(){t.props.onChange(i)})}},_updateSelectedValues:function(e){for(var t=e?e.target:this.refs.select,s=[],i=0,l=t.options.length;l>i;i++)t.options[i].selected&&s.push(t.options[i].value);(e||String(this.state.selectedValues)!==String(s))&&this.setState({selectedValues:s})},_addSelectedToSelection:function(e){var t=this,s=this.props.selectedOptions.concat(r(this.state.filteredOptions,this.props.valueProp,this.state.selectedValues));this.setState({selectedValues:[]},function(){t.props.onChange(s)})},render:function(){var e=this.props,t=this.state,s=t.selectedValues.length>0;return n.default.createElement("div",{className:e.className},n.default.createElement("input",{type:"text",className:this._getClassName("filter"),placeholder:e.placeholder,value:t.filter,onChange:this._onFilterChange,onKeyPress:this._onFilterKeyPress,disabled:e.disabled}),n.default.createElement("select",{multiple:!0,ref:"select",className:this._getClassName("select"),size:e.size,value:t.selectedValues,onChange:this._updateSelectedValues,onDoubleClick:this._addSelectedToSelection,disabled:e.disabled},this.state.filteredOptions.map(function(t){return n.default.createElement("option",{key:t[e.valueProp],value:t[e.valueProp]},t[e.textProp])})),n.default.createElement("button",{type:"button",className:s?this._getClassName("buttonActive","button"):this._getClassName("button"),disabled:!s,onClick:this._addSelectedToSelection},this.props.buttonText))}}),e.exports=t.default},function(t,s){t.exports=e}])});